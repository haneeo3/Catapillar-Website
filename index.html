<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Caterpillar Garden</title>
<style>
  body {
    margin:0;
    font-family:sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    background: linear-gradient(#a8e6a0, #87d37c);
    overflow:hidden;
  }
  .play {
    position:relative;
    width:600px;
    height:400px;
    background:#bfe7a1;
    border:2px solid #4caf50;
    border-radius:12px;
    overflow:hidden;
  }
  .caterpillar-head, .segment {
    position:absolute;
    width:40px;
    height:40px;
    border-radius:50%;
    background:#2e7d32;
  }
  .caterpillar-head::before, .caterpillar-head::after {
    content:"";
    position:absolute;
    top:10px;
    width:6px;
    height:6px;
    border-radius:50%;
    background:#fff;
  }
  .caterpillar-head::after {
    left:20px;
  }
  .leaf {
    position:absolute;
    width:30px;
    height:30px;
    border-radius:50%;
    background:#66bb6a;
  }
  .win {
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    padding:16px 24px;
    background:#ffeb3b;
    border:2px solid #f9a825;
    border-radius:12px;
    font-weight:bold;
    font-size:18px;
    display:none;
    z-index:10;
  }
</style>
</head>
<body>
<div class="play" id="play">
  <div class="caterpillar-head" id="head"></div>
  <div class="win" id="win">ðŸŽ‰ Caterpillar is full! You win! ðŸŽ‰</div>
</div>
<script>
  const play = document.getElementById('play');
  const head = document.getElementById('head');
  const winMsg = document.getElementById('win');

  let headPos = { x: 50, y: 50 };
  const speed = 10;
  let segments = [];

  // Add 8 leaves at random positions
  const totalLeaves = 8;
  let leaves = [];
  for(let i=0;i<totalLeaves;i++){
    const leaf = document.createElement('div');
    leaf.className = 'leaf';
    leaf.style.left = Math.random()*(play.clientWidth-30)+'px';
    leaf.style.top = Math.random()*(play.clientHeight-30)+'px';
    play.appendChild(leaf);
    leaves.push(leaf);
  }

  // Listen to arrow keys
  document.addEventListener('keydown', e=>{
    if(e.key==='ArrowUp') headPos.y -= speed;
    if(e.key==='ArrowDown') headPos.y += speed;
    if(e.key==='ArrowLeft') headPos.x -= speed;
    if(e.key==='ArrowRight') headPos.x += speed;
    // keep inside play area
    headPos.x = Math.max(0, Math.min(play.clientWidth-40, headPos.x));
    headPos.y = Math.max(0, Math.min(play.clientHeight-40, headPos.y));
  });

  function update(){
    // move head
    head.style.left = headPos.x+'px';
    head.style.top = headPos.y+'px';

    // move segments to follow head
    let prevX = headPos.x;
    let prevY = headPos.y;
    segments.forEach(seg=>{
      const segX = parseFloat(seg.style.left || prevX);
      const segY = parseFloat(seg.style.top || prevY);
      // simple follow
      seg.style.left = segX + (prevX - segX)*0.2 +'px';
      seg.style.top = segY + (prevY - segY)*0.2 +'px';
      prevX = segX;
      prevY = segY;
    });

    // check collision with leaves
    leaves.forEach((leaf, idx)=>{
      const lx = leaf.offsetLeft, ly = leaf.offsetTop;
      if(Math.abs(lx - headPos.x)<35 && Math.abs(ly - headPos.y)<35){
        leaf.remove();
        leaves.splice(idx,1);
        addSegment();
      }
    });

    requestAnimationFrame(update);
  }

  function addSegment(){
    const seg = document.createElement('div');
    seg.className='segment';
    // start segment at head position
    seg.style.left = headPos.x+'px';
    seg.style.top = headPos.y+'px';
    play.appendChild(seg);
    segments.push(seg);

    if(segments.length===totalLeaves){
      winMsg.style.display='block';
    }
  }

  update();
</script>
</body>
</html>
